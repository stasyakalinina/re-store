{"version":3,"sources":["actions/index.js","components/shopping-cart-table/shopping-cart-table.js","components/pages/cart-page.js","components/book-item/book-item.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","utils/compose.js","components/error-indicator/error-indicator.js","components/preloader/preloader.js","components/book-list/book-list.js","components/pages/home-page.js","components/shop-header/shop-header.js","components/app/app.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","store.js","index.js"],"names":["bookAddedToCart","bookId","type","payload","fetchBooks","bookstoreService","dispatch","getBooks","then","data","catch","error","booksError","connect","state","shoppingCart","items","cartItems","totalPriceOrder","orderTotal","onIncrease","id","onDecrease","onDelete","length","className","map","item","index","title","count","total","key","onClick","CartPage","BookItem","book","onAddedToCart","author","price","coverImage","src","alt","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","compose","funcs","component","reduceRight","wrapped","f","ErrorIndicator","Preloader","BookList","books","BookListContainer","this","loading","Component","bookList","ownProps","bindActionCreators","HomePage","ShopHeader","numItems","to","href","sum","reduce","elem","path","exact","ErrorBoundry","hasError","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateOrder","quantity","cart","find","itemIndex","findIndex","newCart","idx","slice","updateCartItems","updateCartItem","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","console","log","timeout","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.d4d0c759.chunk.js","sourcesContent":["const booksRequested = () => {\r\n  return {\r\n    type: 'FETCH_BOOKS_REQUEST',\r\n  }\r\n};\r\n\r\nconst booksLoaded = (newBooks) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_SUCCESS',\r\n    payload: newBooks,\r\n  }\r\n};\r\n\r\nconst booksError = (error) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_FAILURE',\r\n    payload: error,\r\n  }\r\n};\r\n\r\nconst bookAddedToCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_ADDED_TO_CART',\r\n    payload: bookId,\r\n  }\r\n}\r\n\r\nconst bookRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_REMOVED_FROM_CART',\r\n    payload: bookId,\r\n  }\r\n}\r\n\r\nconst allBooksRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n    payload: bookId,\r\n  }\r\n}\r\n\r\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\r\n  dispatch(booksRequested());\r\n\r\n  bookstoreService.getBooks()\r\n    .then((data) => dispatch(booksLoaded(data)))\r\n    .catch((error) => dispatch(booksError(error)));\r\n}\r\n\r\nexport {\r\n  fetchBooks,\r\n  bookAddedToCart,\r\n  bookRemovedFromCart,\r\n  allBooksRemovedFromCart,\r\n};","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bookAddedToCart, bookRemovedFromCart, allBooksRemovedFromCart } from '../../actions';\r\nimport './shopping-cart-table.css';\r\n\r\nconst ShoppingCartTable = ({items, totalPriceOrder, onIncrease, onDecrease, onDelete}) => {\r\n\r\n  const renderRow = (item, index) => {\r\n    const { id, title, count, total } = item;\r\n    return (\r\n      <tr key={id}>\r\n        <td>{index + 1}</td>\r\n        <td className=\"table__name\">{title}</td>\r\n        <td>{count}</td>\r\n        <td>${total}</td>\r\n        <td className=\"shopping-cart__action\">\r\n          <button\r\n            onClick={()=> onIncrease(id)}\r\n            className=\"btn btn-outline-success btn-sm\">\r\n            <i className=\"fa fa-plus-circle\" />\r\n          </button>\r\n          <button\r\n            onClick={()=> onDecrease(id)}\r\n            className=\"btn btn-outline-warning btn-sm\">\r\n            <i className=\"fa fa-minus-circle\" />\r\n          </button>\r\n          <button\r\n            onClick={()=> onDelete(id)}\r\n            className=\"btn btn-outline-danger btn-sm\">\r\n            <i className=\"fa fa-trash-o\" />\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    )\r\n  }\r\n\r\n  if(items.length === 0) {\r\n    return <p>Please add book to cart</p>\r\n  }\r\n\r\n  return (\r\n    <section className=\"shopping-cart\">\r\n      <h2>Your Order</h2>\r\n      <table className=\"shopping-cart__table table\">\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Item</th>\r\n            <th>Count</th>\r\n            <th>Order price</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {\r\n            items.map(renderRow)\r\n          }\r\n        </tbody>\r\n      </table>\r\n      <p className=\"total\">\r\n        Total: ${totalPriceOrder}\r\n      </p>\r\n    </section>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { shoppingCart: { cartItems, orderTotal } } = state;\r\n  return {\r\n    items: cartItems,\r\n    totalPriceOrder: orderTotal\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onIncrease: (id) => {\r\n      dispatch(bookAddedToCart(id));\r\n    },\r\n    onDecrease:(id) => {\r\n      dispatch(bookRemovedFromCart(id));\r\n    },\r\n    onDelete: (id) => {\r\n      dispatch(allBooksRemovedFromCart(id));\r\n    },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);","import React from 'react';\r\nimport ShoppingCartTable from '../shopping-cart-table/shopping-cart-table';\r\n\r\nconst CartPage = () => {\r\n\r\n  return (\r\n    <div className=\"cart\">\r\n      <ShoppingCartTable />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartPage;","import React from 'react';\r\nimport './book-item.css';\r\n\r\nconst BookItem = ({book, onAddedToCart}) => {\r\n\r\n  const { title, author, price, coverImage } = book;\r\n  return (\r\n    <div className=\"book-item\">\r\n      <div className=\"book-cover\">\r\n        <img src={coverImage} alt=\"cover\" />\r\n      </div>\r\n      <div className=\"book-details\">\r\n        <span className=\"book-title\">{title}</span>\r\n        <p className=\"book-author\">{author}</p>\r\n        <p className=\"book-price\">${price}</p>\r\n        <button\r\n          className=\"btn btn-info book-btn\"\r\n          onClick={onAddedToCart}>\r\n            Add to cart</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BookItem;","import React from 'react';\r\n\r\nconst {\r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n  BookstoreServiceProvider,\r\n  BookstoreServiceConsumer\r\n};","import React from 'react';\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context/bookstore-service-context';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n\r\n  return (props) => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {\r\n          (bookstoreService) => {\r\n            return (\r\n              <Wrapped\r\n                {...props}\r\n                bookstoreService={bookstoreService} />\r\n              )\r\n          }\r\n        }\r\n      </BookstoreServiceConsumer>\r\n    );\r\n  }\r\n};\r\n\r\nexport default withBookstoreService;","const compose = (...funcs) => (component) => {\r\n  return funcs.reduceRight(\r\n    (wrapped, f) => f(wrapped), component);\r\n};\r\n\r\nexport default compose;","import React from 'react';\r\nimport './error-indicator.css';\r\n\r\nconst ErrorIndicator = () => {\r\n  return (\r\n    <section className=\"error\">\r\n      <h3>Boom!</h3>\r\n      <p>Something has gone terribly wrong</p>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ErrorIndicator;","import React from 'react';\r\nimport './preloader.css';\r\n\r\nconst Preloader = () => {\r\n  return (\r\n    <div className=\"preloader\">\r\n      <div className=\"preloader-outter\"></div>\r\n      <div className=\"preloader-inner\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Preloader;","import React, { Component } from 'react';\r\nimport BookItem from '../book-item/book-item';\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux';\r\n\r\nimport withBookstoreService from '../hoc/with-bookstore-service';\r\nimport { fetchBooks, bookAddedToCart } from '../../actions';\r\nimport { compose } from '../../utils';\r\n\r\nimport ErrorIndicator from '../error-indicator/error-indicator';\r\nimport Preloader from '../preloader/preloader';\r\nimport './book-list.css';\r\n\r\nconst BookList = (props) => {\r\n  const { books, onAddedToCart } = props;\r\n\r\n  return (\r\n    <ul className=\"book-list\">\r\n      {\r\n        books.map((book) => {\r\n          return (\r\n            <li key={book.id}>\r\n              <BookItem\r\n                book={book}\r\n                onAddedToCart={() => onAddedToCart(book.id)}/>\r\n            </li>\r\n          )\r\n        })\r\n      }\r\n    </ul>\r\n  );\r\n};\r\nclass BookListContainer extends Component {\r\n\r\n  componentDidMount() {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, loading, error, onAddedToCart } = this.props;\r\n\r\n    if (loading) {\r\n      return <Preloader />\r\n    }\r\n\r\n    if (error) {\r\n      return <ErrorIndicator />\r\n    }\r\n\r\n    return <BookList books={books} onAddedToCart={onAddedToCart}/>\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { bookList: {books, loading, error } } = state;\r\n  return {\r\n    books,\r\n    loading,\r\n    error,\r\n  }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  const { bookstoreService } = ownProps;\r\n  return bindActionCreators({\r\n    fetchBooks: fetchBooks(bookstoreService),\r\n    onAddedToCart: bookAddedToCart,\r\n  }, dispatch);\r\n};\r\n\r\nexport default compose(\r\n  withBookstoreService(),\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer);\r\n","import React from 'react';\r\nimport BookList from '../book-list/book-list';\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <div className=\"shop\">\r\n      <BookList />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './shop-header.css';\r\n\r\nconst ShopHeader = ({numItems, total}) => {\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <Link to=\"/\">\r\n        <span className=\"logo text-dark\">ReStore</span>\r\n      </Link>\r\n      <nav className=\"cart\">\r\n        <Link to=\"/cart\">\r\n          <p className=\"cart-details\" href=\"#\">\r\n            <i className=\"cart-icon fa fa-shopping-cart\"></i>\r\n            {numItems} items (${total})\r\n          </p>\r\n        </Link>\r\n      </nav>\r\n    </header>\r\n  )\r\n};\r\n\r\nexport default ShopHeader;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { CartPage, HomePage } from '../pages';\r\nimport ShopHeader from '../shop-header/shop-header';\r\nimport './app.css';\r\n\r\nconst App = (props) => {\r\n  const { cartItems, orderTotal } = props;\r\n  let sum = cartItems.reduce((sum, elem) => sum + elem.count, 0);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <ShopHeader numItems={sum} total={orderTotal ? orderTotal : 0}/>\r\n      <Switch>\r\n        <Route\r\n          path=\"/\"\r\n          component={HomePage}\r\n          exact />\r\n        <Route\r\n          path=\"/cart\"\r\n          component={CartPage} />\r\n      </Switch>\r\n    </div>\r\n  )\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { cartItems, orderTotal } = state.shoppingCart;\r\n  return {\r\n    cartItems,\r\n    orderTotal\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(App);","import React, { Component } from 'react';\r\nimport ErrorIndicator from '../error-indicator/error-indicator';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n  state = {\r\n    hasError: false,\r\n  }\r\n\r\n  componentDidCatch() {\r\n    this.setState({\r\n      hasError: true,\r\n    });\r\n  }\r\n\r\n  render() {\r\n\r\n    if(this.state.hasError) {\r\n      return <ErrorIndicator />\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n};","\r\nexport default class BookstoreService {\r\n\r\n  data = [\r\n    {\r\n      id: 1,\r\n      title: 'Production-Ready Microservices',\r\n      author: 'Susan J. Fowler',\r\n      price: 32,\r\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg',\r\n    },\r\n    {\r\n      id: 2,\r\n      title: 'Release It!',\r\n      author: 'Michael T. Nygard',\r\n      price: 28,\r\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/419zAwJJH4L._SX415_BO1,204,203,200_.jpg',\r\n    },\r\n    {\r\n      id: 3,\r\n      title: 'JavaScript: The Definitive Guide: Activate Your Web Pages',\r\n      author: 'David Flanagan',\r\n      price: 21,\r\n      coverImage: 'https://m.media-amazon.com/images/I/91xorHXzWbL._AC_UY218_ML3_.jpg',\r\n    },\r\n    {\r\n      id: 4,\r\n      title: 'A Smarter Way to Learn JavaScript',\r\n      author: 'Mark Myers',\r\n      price: 19,\r\n      coverImage: 'https://m.media-amazon.com/images/I/617LMuOkVWL._AC_UY218_ML3_.jpg',\r\n    },\r\n    {\r\n      id: 5,\r\n      title: 'JavaScript: The Good Parts: The Good Parts',\r\n      author: 'Douglas Crockford',\r\n      price: 14,\r\n      coverImage: 'https://m.media-amazon.com/images/I/91YlBt-bCHL._AC_UY218_ML3_.jpg',\r\n    },\r\n  ];\r\n\r\n  getBooks() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        if(Math.random() > 0.95) {\r\n          reject(new Error(\"Something happend!!!\"));\r\n        } else {\r\n          resolve(this.data);\r\n        }\r\n      }, 2000)\r\n    });\r\n  }\r\n}","const updateBookList = (state, action) => {\r\n\r\n  if (state === undefined) {\r\n    return {\r\n      books: [],\r\n      loading: true,\r\n      error: null\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case 'FETCH_BOOKS_REQUEST':\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null\r\n      };\r\n\r\n    case 'FETCH_BOOKS_SUCCESS':\r\n      return {\r\n        books: action.payload,\r\n        loading: false,\r\n        error: null\r\n      };\r\n\r\n    case 'FETCH_BOOKS_FAILURE':\r\n      return {\r\n        books: [],\r\n        loading: false,\r\n        error: action.payload\r\n      };\r\n\r\n    default:\r\n      return state.bookList;\r\n  }\r\n};\r\n\r\nexport default updateBookList;","const updateCartItems = (cartItems, item, idx) => {\r\n\r\n  if (item.count === 0) {\r\n    return [\r\n      ...cartItems.slice(0, idx),\r\n      ...cartItems.slice(idx + 1)\r\n    ];\r\n  }\r\n\r\n  if (idx === -1) {\r\n    return [\r\n      ...cartItems,\r\n      item\r\n    ];\r\n  }\r\n\r\n  return [\r\n    ...cartItems.slice(0, idx),\r\n    item,\r\n    ...cartItems.slice(idx + 1)\r\n  ];\r\n};\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n\r\n  const {\r\n    id = book.id,\r\n    count = 0,\r\n    title = book.title,\r\n    total = 0} = item;\r\n\r\n  return {\r\n    id,\r\n    title,\r\n    count: count + quantity,\r\n    total: total + quantity*book.price\r\n  };\r\n};\r\n\r\nconst updateOrderTotal = (cart) => cart.reduce((sum, item) => sum + item.total, 0);\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n  const { bookList: { books }, shoppingCart: { cartItems }} = state;\r\n\r\n  const book = books.find(({id}) => id === bookId);\r\n  const itemIndex = cartItems.findIndex(({id}) => id === bookId);\r\n  const item = cartItems[itemIndex];\r\n\r\n  const newItem = updateCartItem(book, item, quantity);\r\n  const newCart = updateCartItems(cartItems, newItem, itemIndex);\r\n\r\n  return {\r\n    cartItems: newCart,\r\n    orderTotal: updateOrderTotal(newCart)\r\n  };\r\n};\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n\r\n  if (state === undefined) {\r\n    return {\r\n      cartItems: [],\r\n      orderTotal: 0\r\n    }\r\n  }\r\n\r\n  switch(action.type) {\r\n    case 'BOOK_ADDED_TO_CART':\r\n      return updateOrder(state, action.payload, 1);\r\n\r\n    case 'BOOK_REMOVED_FROM_CART':\r\n      return updateOrder(state, action.payload, -1);\r\n\r\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n      const item = state.shoppingCart.cartItems.find(({id}) => id === action.payload);\r\n      return updateOrder(state, action.payload, -item.count);\r\n\r\n    default:\r\n      return state.shoppingCart;\r\n  }\r\n};\r\n\r\nexport default updateShoppingCart;\r\n","import updateBookList from './book-list';\r\nimport updateShoppingCart from './shopping-cart';\r\n\r\nconst reducer = (state, action) => {\r\n  return {\r\n    bookList: updateBookList(state, action),\r\n    shoppingCart: updateShoppingCart(state, action)\r\n  };\r\n};\r\n\r\nexport default reducer;","import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport reducer from './reducers';\r\n\r\nconst logMiddleware = () => (dispatch) => (action) => {\r\n  console.log(action.type);\r\n  return dispatch(action);\r\n};\r\n\r\nconst stringMiddleware = () => (dispatch) => (action) => {\r\n  if (typeof action === 'string') {\r\n    return dispatch({\r\n      type: action,\r\n    });\r\n  }\r\n\r\n  return dispatch(action);\r\n}\r\n\r\nconst store = createStore(reducer, applyMiddleware(\r\n  thunkMiddleware, stringMiddleware, logMiddleware));\r\n\r\nstore.dispatch('HELLO_WORLD');\r\n\r\nconst delayedActionCreator = (timeout) => (dispatch) => {\r\n  setTimeout(() => dispatch({\r\n    type: 'DELAYED_ACTION'\r\n  }), timeout);\r\n}\r\n\r\nstore.dispatch(delayedActionCreator(3500));\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/app/app';\nimport ErrorBoundry from './components/error-boundry/error-boundry';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context/bookstore-service-context';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}